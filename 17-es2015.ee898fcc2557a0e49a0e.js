(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{WD2g:function(e,t,n){"use strict";n.r(t);var a=n("SVse"),i=n("M0ag"),r=n("s7LF"),o=n("SfIc"),l=n("crmZ"),c=n("6yq/"),s=n("iInd"),m=n("ZZ88"),d=n("IheW"),p=n("AytR"),u=n("8Y7J");const g=p.a.apiMedias+"/publicaciones/";new d.e({"Content-Type":"multipart/form-data"});let f=(()=>{class e{constructor(e){this.myHttp=e,this.url=p.a.apiUrl+"/publicacion",this.urlUpload=p.a.apiUrl+"/publicacion/upload_image_post"}getPublicaciones(){return this.myHttp.get(this.url)}addPublicacion(e){return this.myHttp.post(this.url,e)}showPublicacion(e){return this.myHttp.get(this.url+"/"+e)}editPublicacion(e,t){return this.myHttp.put(this.url+"/"+e,t)}adicionarComentario(e){return this.myHttp.post(this.url+"/comentario",e)}editarComentario(e,t){return this.myHttp.put(this.url+"/comentario/"+e,t)}deletePublicacion(e){return this.myHttp.delete(this.url+"/"+e)}uploadImagesPost(e){return this.myHttp.post(this.urlUpload,e)}getColumnasTablaPublicaciones(){return[{data:"fecha",render:function(e){const t=new Date(e),n=t.getMonth()+1;return t.getDate()+"/"+n+"/"+t.getFullYear()},className:"text-center"},{data:function(e,t,n){return'<img style="object-fit: cover" width="100px" height="60px" src="'+g+e.id+"/"+e.imagenDestacada+'">'},className:"text-center"},{data:function(e,t,n){return e.titulo+'<p style="font-size:12px"><strong>Comentarios: </strong>'+e.comentarios.length+"</p>"}},{data:"categoria.nombre",className:"text-center"},{data:"estado.nombre",className:"text-center"},{data:"publicadaPor.nombre",className:"text-center"}]}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](d.b))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=n("G0yt"),h=n("m3o8"),v=n("ljdc");function S(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"img",19),u["\u0275\u0275listener"]("click",(function(){u["\u0275\u0275restoreView"](e);const n=t.index;return u["\u0275\u0275nextContext"]().open(n)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("src",e.thumb,u["\u0275\u0275sanitizeUrl"])}}let y=(()=>{class e{constructor(e,t,n){this.route=e,this.modal=t,this._lightbox=n,this.urlFotoDestacada=p.a.apiMedias+"/publicaciones/",this.fotosPublicacion=[]}ngOnInit(){this.urlFotoDestacada+=this.publicacion.id+"/"+this.publicacion.imagenDestacada,this.fotosPublicacion=[{src:this.urlFotoDestacada,caption:"Imagen principal",thumb:this.urlFotoDestacada}]}open(e){this._lightbox.open(this.fotosPublicacion,e)}close(){this._lightbox.close()}cerrar(){this.modal.dismissAll()}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](s.a),u["\u0275\u0275directiveInject"](b.f),u["\u0275\u0275directiveInject"](h.Lightbox))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-ver-publicacion"]],inputs:{publicacion:"publicacion"},decls:34,vars:10,consts:[[1,"modal-publicacion"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"fa","fa-blog"],["type","button","aria-label","Close","tabIndex","-1",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"post"],[1,"post-info","row"],[1,"post-author","col-4"],[1,"fa","fa-user"],[1,"post-date","col-4"],[1,"fa","fa-calendar"],[1,"fa","fa-check-circle"],[1,"post-media","text-center"],[4,"ngFor","ngForOf"],[1,"divBody",3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["width","400px",1,"img-portada","img-thumbnail",3,"src","click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"h4",2),u["\u0275\u0275element"](3,"i",3),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"button",4),u["\u0275\u0275listener"]("click",(function(){return t.cerrar()})),u["\u0275\u0275elementStart"](6,"span",5),u["\u0275\u0275text"](7,"\xd7"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"div",6),u["\u0275\u0275elementStart"](9,"article",7),u["\u0275\u0275elementStart"](10,"div",8),u["\u0275\u0275elementStart"](11,"span",9),u["\u0275\u0275elementStart"](12,"strong"),u["\u0275\u0275element"](13,"i",10),u["\u0275\u0275text"](14," Post by:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"span",11),u["\u0275\u0275elementStart"](17,"strong"),u["\u0275\u0275element"](18,"i",12),u["\u0275\u0275text"](19," Date:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](20),u["\u0275\u0275pipe"](21,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"span",11),u["\u0275\u0275elementStart"](23,"strong"),u["\u0275\u0275element"](24,"i",13),u["\u0275\u0275text"](25," Status:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"div",14),u["\u0275\u0275template"](28,S,2,1,"div",15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](29,"div",16),u["\u0275\u0275pipe"](30,"safeHtml"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"div",17),u["\u0275\u0275elementStart"](32,"button",18),u["\u0275\u0275listener"]("click",(function(){return t.cerrar()})),u["\u0275\u0275text"](33,"Close"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"](" ",t.publicacion.titulo,""),u["\u0275\u0275advance"](11),u["\u0275\u0275textInterpolate1"](" ",t.publicacion.publicadaPor.nombre,""),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](21,6,t.publicacion.fecha),""),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate1"](" ",t.publicacion.estado.nombre,""),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",t.fotosPublicacion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("innerHTML",u["\u0275\u0275pipeBind1"](30,8,t.publicacion.body),u["\u0275\u0275sanitizeHtml"]))},directives:[a.NgForOf],pipes:[a.DatePipe,v.a],styles:[".post[_ngcontent-%COMP%]{height:500px;overflow-y:auto;overflow-x:hidden}.post-info[_ngcontent-%COMP%]{margin-bottom:20px}.img-portada[_ngcontent-%COMP%]{cursor:pointer}.modal-header[_ngcontent-%COMP%]{background-color:#1d1d1d}.close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{color:var(--white)}.divBody[_ngcontent-%COMP%]{margin:20px 0}"],data:{animation:[Object(m.a)()]}}),e})();var E=n("3zLz"),C=n("pK/H");const x=["successSwal"],w=function(){return["router-link-active"]};let I=(()=>{class e{constructor(e,t,n,a){this.myServicio=e,this.router=t,this.modalService=n,this.ngZone=a,this.urlApi=p.a.apiUrl+"/publicacion",this.nombresColumnas=["Date","Thumbnail","Title","Category","Status","Author"]}ngOnInit(){this.columnasData=this.myServicio.getColumnasTablaPublicaciones()}getDismissReason(e){return e===b.a.ESC?"by pressing ESC":e===b.a.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}verDetallesPublicacion(e){const t=this.modalService.open(y,{size:"lg"});t.componentInstance.publicacion=e,t.result.then(e=>{this.closeResult=`Closed with: ${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`})}editarPublicacion(e){this.ngZone.run(()=>this.router.navigate(["/admin/publicaciones/editar-publicacion",e.id])).then()}eliminarPublicacion(e){this.myServicio.deletePublicacion(e).subscribe(e=>{e&&this.successSwal.show()},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](f),u["\u0275\u0275directiveInject"](s.e),u["\u0275\u0275directiveInject"](b.f),u["\u0275\u0275directiveInject"](u.NgZone))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-lista-publicaciones"]],viewQuery:function(e,t){var n;1&e&&u["\u0275\u0275viewQuery"](x,!0),2&e&&u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.successSwal=n.first)},decls:11,vars:11,consts:[[1,"titlePage"],[3,"heading","icon"],["routerLink","/admin/publicaciones/adicionar-publicaciones",1,"btn","btn-sm","btn-primary","linkAdicionar",3,"routerLinkActive"],[1,"fa","fa-plus-circle"],[1,"row"],[1,"col-md-12"],[3,"nombresColumnas","urlApi","tituloReporte","columnasData","verDetallesClick","editarClick","eliminarClick"],["title","Information","text","The post has been deleted","type","success",3,"showCancelButton","focusCancel"],["successSwal",""]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"div",0),u["\u0275\u0275element"](2,"app-page-header",1),u["\u0275\u0275elementStart"](3,"a",2),u["\u0275\u0275element"](4,"i",3),u["\u0275\u0275text"](5," New post "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",4),u["\u0275\u0275elementStart"](7,"div",5),u["\u0275\u0275elementStart"](8,"dymtabla",6),u["\u0275\u0275listener"]("verDetallesClick",(function(e){return t.verDetallesPublicacion(e)}))("editarClick",(function(e){return t.editarPublicacion(e)}))("eliminarClick",(function(e){return t.eliminarPublicacion(e)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](9,"swal",7,8),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275property"]("@routerTransition",void 0),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("heading","Post list")("icon","fa-pencil-square"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("routerLinkActive",u["\u0275\u0275pureFunction0"](10,w)),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("nombresColumnas",t.nombresColumnas)("urlApi",t.urlApi)("tituloReporte","Posts list")("columnasData",t.columnasData),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("showCancelButton",!1)("focusCancel",!0))},directives:[E.a,s.g,s.f,C.a,o.a],styles:[".titlePage[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;justify-content:space-between}.titlePage[_ngcontent-%COMP%]   .linkAdicionar[_ngcontent-%COMP%]{height:32px;width:150px}"],data:{animation:[Object(m.a)()]}}),e})();var P=n("ufa9");const _=["confirmSwal"];function D(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"option",42),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275propertyInterpolate"]("value",e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.value)}}function k(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"option",42),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275propertyInterpolate"]("value",e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("",e.value," ")}}const O=["confirmSwal"],M=["notFoundSwal"];function F(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"option",43),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275propertyInterpolate"]("value",e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.value,"")}}function N(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"option",43),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275propertyInterpolate"]("value",e.key),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("",e.value," ")}}const j=[{path:"",component:I},{path:"adicionar-publicaciones",component:(()=>{class e{constructor(e,t,n){this.formBuilder=e,this.myServicio=t,this.srvCodigueras=n,this.categorias_publicacion=[],this.estados_publicacion=[],this.imgSrc="assets/images/upload_img.png",this.contadorLetrasDescripcion=0}ngOnInit(){this.form=this.formBuilder.group({fecha:["",[r.z.required]],titulo:["",[r.z.required]],categoria:["",[r.z.required]],estado:["",[r.z.required]],body:["",[r.z.required]],imagenDestacada:["",[r.z.required]],metaDescripcion:[""],palabrasClave:[""]}),this.srvCodigueras.getCategoriasPublicacion().subscribe(e=>{e.items.map(e=>{this.categorias_publicacion.push({key:e.id,value:e.nombre})})}),this.srvCodigueras.getEstadosPublicacion().subscribe(e=>{e.items.map(e=>{this.estados_publicacion.push({key:e.id,value:e.nombre})})})}loadImage(e){if(e.target.files&&e.target.files[0]){const t=new FileReader;t.onload=e=>{this.imgSrc=e.target.result.toString()},t.readAsDataURL(e.target.files[0]),this.archivoImagen=e.target.files[0]}}onSubmit(){const e=Object.assign(this.form.value,{publicadaPor:JSON.parse(localStorage.getItem("socialUser")).id});let t=new FormData;t.append("datos",JSON.stringify(e)),t.append("imagenDestacada",this.archivoImagen,"pachi.png"),this.myServicio.addPublicacion(t).subscribe(e=>{e&&this.confirmSwal.show()},e=>{console.log(e)})}cerrarVentana(){this.form.reset(),this.contadorLetrasDescripcion=0,this.imgSrc="assets/images/upload_img.png"}getInitData(){return{height:400,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste imagetools wordcount"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | code",content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i","assets/css/codepen.min.css"],image_title:!0,automatic_uploads:!0,file_picker_types:"image",images_upload_handler:(e,t,n)=>{tinymce.activeEditor.editorUpload.blobCache.add(e);const a=new File([e.blob()],e.blob().name,{type:e.blob().type});let i=new FormData;i.append("imagenPost",a,e.blob().name),this.myServicio.uploadImagesPost(i).subscribe(e=>{t(p.a.apiMedias+"/publicaciones/all/"+e.items)})}}}contarCaracteresDescripcion(){let e;e=this.form.controls.metaDescripcion.value,this.contadorLetrasDescripcion=e.length}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](r.e),u["\u0275\u0275directiveInject"](f),u["\u0275\u0275directiveInject"](P.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-adicionar-publicaciones"]],viewQuery:function(e,t){var n;1&e&&u["\u0275\u0275staticViewQuery"](_,!0),2&e&&u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.confirmSwal=n.first)},inputs:{src:"src"},decls:102,vars:13,consts:[[3,"heading","icon"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-9"],[1,"card"],[1,"card-header"],[1,"fa","fa-list"],[1,"card-body"],[1,"form-group"],["for","",1,"text-primary"],[1,"input-group"],[1,"input-group-prepend"],["id","addon-wrapping",1,"input-group-text","text-primary"],["type","text","formControlName","titulo","placeholder","Title","aria-describedby","helpId",1,"form-control"],["id","twiny","apiKey","voodxvn25tlrviree2bqwnao599n8buydbimqiv1tcoo8okn","initialValue","<p>Initial content of the editor</p>",3,"formControlName","init"],[1,"fa","fa-cube"],[1,"col-6"],["for","description",1,"text-primary"],["name","description","formControlName","metaDescripcion","id","description","rows","3","maxlength","160",1,"form-control",3,"ngModelChange"],[1,"help-block"],["id","description-counter"],["for","keywords",1,"text-primary"],["name","palabrasClave","id","palabrasClave","rows","3","maxlength","80","formControlName","palabrasClave",1,"form-control"],["href","#","id","button-gen-keywords",1,"btn","btn-primary","btn-sm"],[1,"col-3"],[1,"fa","fa-tools"],["aria-hidden","true",1,"fa","fa-calendar"],["type","date","formControlName","fecha","placeholder","Date","aria-describedby","helpId",1,"form-control"],["aria-hidden","true",1,"fa","fa-filter"],["formControlName","estado",1,"form-control"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","categoria",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fa","fa-save"],[1,"fa","fa-image"],[1,"image-upload"],["for","fileImagenDestacada"],["height","120px",3,"src"],["id","fileImagenDestacada","formControlName","imagenDestacada","type","file","capture","camera","accept","image/*",3,"change"],["title","Information","text","The post has been added","type","success",3,"showCancelButton","focusCancel","confirm"],["confirmSwal",""],[3,"value"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275element"](1,"app-page-header",0),u["\u0275\u0275elementStart"](2,"form",1),u["\u0275\u0275listener"]("ngSubmit",(function(){return t.onSubmit()})),u["\u0275\u0275elementStart"](3,"div",2),u["\u0275\u0275elementStart"](4,"div",3),u["\u0275\u0275elementStart"](5,"div",4),u["\u0275\u0275elementStart"](6,"div",5),u["\u0275\u0275elementStart"](7,"strong"),u["\u0275\u0275element"](8,"i",6),u["\u0275\u0275text"](9," General"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",7),u["\u0275\u0275elementStart"](11,"div",8),u["\u0275\u0275elementStart"](12,"label",9),u["\u0275\u0275text"](13,"Title:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",10),u["\u0275\u0275elementStart"](15,"div",11),u["\u0275\u0275elementStart"](16,"span",12),u["\u0275\u0275text"](17,"T"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](18,"input",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",8),u["\u0275\u0275elementStart"](20,"label",9),u["\u0275\u0275text"](21,"Content:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](22,"editor",14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"div",4),u["\u0275\u0275elementStart"](24,"div",5),u["\u0275\u0275elementStart"](25,"strong"),u["\u0275\u0275element"](26,"i",15),u["\u0275\u0275text"](27," SEO"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"div",7),u["\u0275\u0275elementStart"](29,"div",2),u["\u0275\u0275elementStart"](30,"div",16),u["\u0275\u0275elementStart"](31,"div",8),u["\u0275\u0275elementStart"](32,"label",17),u["\u0275\u0275text"](33,"Meta Description:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"textarea",18),u["\u0275\u0275listener"]("ngModelChange",(function(){return t.contarCaracteresDescripcion()})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"p",19),u["\u0275\u0275elementStart"](36,"span",20),u["\u0275\u0275text"](37),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](38,"/160"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"div",16),u["\u0275\u0275elementStart"](40,"div",8),u["\u0275\u0275elementStart"](41,"label",21),u["\u0275\u0275text"](42,"Keywords:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](43,"textarea",22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](44,"div",8),u["\u0275\u0275elementStart"](45,"a",23),u["\u0275\u0275text"](46,"Generate keyword"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](47,"div",24),u["\u0275\u0275elementStart"](48,"div",4),u["\u0275\u0275elementStart"](49,"div",5),u["\u0275\u0275elementStart"](50,"strong"),u["\u0275\u0275element"](51,"i",25),u["\u0275\u0275text"](52," Configuration"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](53,"div",7),u["\u0275\u0275elementStart"](54,"div",8),u["\u0275\u0275elementStart"](55,"label",9),u["\u0275\u0275text"](56,"Date:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](57,"div",10),u["\u0275\u0275elementStart"](58,"div",11),u["\u0275\u0275elementStart"](59,"span",12),u["\u0275\u0275element"](60,"i",26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](61,"input",27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](62,"div",8),u["\u0275\u0275elementStart"](63,"label",9),u["\u0275\u0275text"](64,"Status:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](65,"div",10),u["\u0275\u0275elementStart"](66,"div",11),u["\u0275\u0275elementStart"](67,"span",12),u["\u0275\u0275element"](68,"i",28),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](69,"select",29),u["\u0275\u0275elementStart"](70,"option",30),u["\u0275\u0275text"](71,"Select"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](72,D,2,2,"option",31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](73,"div",8),u["\u0275\u0275elementStart"](74,"label",9),u["\u0275\u0275text"](75,"Category:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](76,"div",10),u["\u0275\u0275elementStart"](77,"div",11),u["\u0275\u0275elementStart"](78,"span",12),u["\u0275\u0275element"](79,"i",28),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](80,"select",32),u["\u0275\u0275elementStart"](81,"option",30),u["\u0275\u0275text"](82,"Select"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](83,k,2,2,"option",31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](84,"hr"),u["\u0275\u0275elementStart"](85,"button",33),u["\u0275\u0275element"](86,"i",34),u["\u0275\u0275text"](87," Save"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](88,"br"),u["\u0275\u0275elementStart"](89,"div",4),u["\u0275\u0275elementStart"](90,"div",5),u["\u0275\u0275elementStart"](91,"strong"),u["\u0275\u0275element"](92,"i",35),u["\u0275\u0275text"](93," Cover image"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](94,"div",7),u["\u0275\u0275elementStart"](95,"div",8),u["\u0275\u0275elementStart"](96,"div",36),u["\u0275\u0275elementStart"](97,"label",37),u["\u0275\u0275element"](98,"img",38),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](99,"input",39),u["\u0275\u0275listener"]("change",(function(e){return t.loadImage(e)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](100,"swal",40,41),u["\u0275\u0275listener"]("confirm",(function(){return t.cerrarVentana()})),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275property"]("@routerTransition",void 0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("heading","New post")("icon","fa-pencil-square"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](20),u["\u0275\u0275property"]("formControlName","body")("init",t.getInitData()),u["\u0275\u0275advance"](15),u["\u0275\u0275textInterpolate"](t.contadorLetrasDescripcion),u["\u0275\u0275advance"](35),u["\u0275\u0275property"]("ngForOf",t.estados_publicacion),u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("ngForOf",t.categorias_publicacion),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",t.form.invalid),u["\u0275\u0275advance"](13),u["\u0275\u0275property"]("src",t.imgSrc,u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("showCancelButton",!1)("focusCancel",!0))},directives:[E.a,r.B,r.p,r.j,r.c,r.o,r.h,l.a,r.l,r.x,r.s,r.A,a.NgForOf,o.a],styles:[".image-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.image-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:rotate(3deg)}.image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.clsImagenDestacada[_ngcontent-%COMP%]{text-align:center}"],data:{animation:[Object(m.a)()]}}),e})()},{path:"editar-publicacion/:id",component:(()=>{class e{constructor(e,t,n,a,i){this.formBuilder=e,this.myServicio=t,this.route=n,this.srvCodigueras=a,this.router=i,this.urlFotosDestacadas=p.a.apiMedias+"publicaciones",this.imgSrc="assets/images/upload_img.png",this.categorias_publicacion=[],this.estados_publicacion=[],this.contadorLetrasDescripcion=0}ngOnInit(){this.idPublicacion=Number.parseInt(this.route.snapshot.paramMap.get("id")),this.myServicio.showPublicacion(this.idPublicacion).subscribe(e=>{e.items?(this.form.controls.fecha.setValue(e.items.fecha.slice(0,10)),this.form.controls.titulo.setValue(e.items.titulo),this.form.controls.categoria.setValue(e.items.categoria.id),this.form.controls.estado.setValue(e.items.estado.id),this.form.controls.body.setValue(e.items.body),this.form.controls.meta_descripcion.setValue(e.items.meta_descripcion),this.form.controls.palabras_clave.setValue(e.items.palabras_clave),this.imgSrc=this.urlFotosDestacadas+"/"+this.idPublicacion+"/"+e.items.imagenDestacada,this.contarCaracteresDescripcion()):this.notFoundSwal.show()}),this.form=this.formBuilder.group({fecha:["",[r.z.required]],titulo:["",[r.z.required]],categoria:["",[r.z.required]],estado:["",[r.z.required]],body:["",[r.z.required]],imagenDestacada:[""],meta_descripcion:[""],palabras_clave:[""]}),this.srvCodigueras.getCategoriasPublicacion().subscribe(e=>{e.items.map(e=>{this.categorias_publicacion.push({key:e.id,value:e.nombre})})}),this.srvCodigueras.getEstadosPublicacion().subscribe(e=>{e.items.map(e=>{this.estados_publicacion.push({key:e.id,value:e.nombre})})})}loadImage(e){if(e.target.files&&e.target.files[0]){const t=new FileReader;t.onload=e=>{this.imgSrc=e.target.result.toString()},t.readAsDataURL(e.target.files[0]),this.archivoImagen=e.target.files[0]}}onSubmit(){const e=Object.assign(this.form.value,{publicadaPor:JSON.parse(localStorage.getItem("socialUser")).id}),t=new FormData;t.append("datos",JSON.stringify(e)),t.append("_method","PATCH"),this.archivoImagen&&t.append("imagenDestacada",this.archivoImagen,"publicacion_temp.png"),this.myServicio.editPublicacion(this.idPublicacion,t).subscribe(e=>{e&&this.confirmSwal.show()},e=>{console.log(e)})}cerrarVentana(){this.router.navigate(["/admin/publicaciones"])}getInitData(){return{height:400,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste imagetools wordcount"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | code",content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i","assets/css/codepen.min.css"],image_title:!0,automatic_uploads:!0,file_picker_types:"image",images_upload_handler:(e,t,n)=>{tinymce.activeEditor.editorUpload.blobCache.add(e);const a=new File([e.blob()],e.blob().name,{type:e.blob().type}),i=new FormData;i.append("imagenPost",a,e.blob().name),this.myServicio.uploadImagesPost(i).subscribe(e=>{t(p.a.apiMedias+"/publicaciones/all/"+e.items)})}}}contarCaracteresDescripcion(){let e;e=this.form.controls.meta_descripcion.value,this.contadorLetrasDescripcion=e?e.length:0}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](r.e),u["\u0275\u0275directiveInject"](f),u["\u0275\u0275directiveInject"](s.a),u["\u0275\u0275directiveInject"](P.a),u["\u0275\u0275directiveInject"](s.e))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-editar-publicacion"]],viewQuery:function(e,t){var n;1&e&&(u["\u0275\u0275staticViewQuery"](O,!0),u["\u0275\u0275staticViewQuery"](M,!0)),2&e&&(u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.confirmSwal=n.first),u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.notFoundSwal=n.first))},inputs:{src:"src"},decls:101,vars:14,consts:[[3,"heading","icon"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-9"],[1,"card"],[1,"card-header"],[1,"fa","fa-list"],[1,"card-body"],[1,"form-group"],["for","",1,"text-primary"],[1,"input-group"],[1,"input-group-prepend"],["id","addon-wrapping",1,"input-group-text","text-primary"],["type","text","formControlName","titulo","placeholder","Title","aria-describedby","helpId",1,"form-control"],["id","twiny","apiKey","voodxvn25tlrviree2bqwnao599n8buydbimqiv1tcoo8okn","initialValue","<p>Initial content of the editor</p>",3,"formControlName","init"],[1,"fa","fa-cube"],[1,"col-6"],["for","description",1,"text-primary"],["name","description","formControlName","meta_descripcion","id","description","rows","3","maxlength","160",1,"form-control",3,"ngModelChange"],[1,"help-block"],["id","description-counter"],["for","keywords",1,"text-primary"],["name","palabrasClave","id","palabrasClave","rows","3","maxlength","80","formControlName","palabras_clave",1,"form-control"],[1,"col-3"],[1,"fa","fa-tools"],["aria-hidden","true",1,"fa","fa-calendar"],["type","date","formControlName","fecha","placeholder","Fecha","aria-describedby","helpId",1,"form-control"],["aria-hidden","true",1,"fa","fa-filter"],["formControlName","estado",1,"form-control"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","categoria",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fa","fa-save"],[1,"fa","fa-image"],[1,"image-upload"],["for","fileImagenDestacada"],["width","180px",3,"src"],["id","fileImagenDestacada","formControlName","imagenDestacada","type","file","capture","camera","accept","image/*",3,"change"],["title","Information","text","The post has been edited","type","success",3,"showCancelButton","focusCancel","confirm"],["confirmSwal",""],["title","Information","text","Post not found with this id","type","error",3,"showCancelButton","confirm"],["notFoundSwal",""],[3,"value"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275element"](1,"app-page-header",0),u["\u0275\u0275elementStart"](2,"form",1),u["\u0275\u0275listener"]("ngSubmit",(function(){return t.onSubmit()})),u["\u0275\u0275elementStart"](3,"div",2),u["\u0275\u0275elementStart"](4,"div",3),u["\u0275\u0275elementStart"](5,"div",4),u["\u0275\u0275elementStart"](6,"div",5),u["\u0275\u0275elementStart"](7,"strong"),u["\u0275\u0275element"](8,"i",6),u["\u0275\u0275text"](9," General"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",7),u["\u0275\u0275elementStart"](11,"div",8),u["\u0275\u0275elementStart"](12,"label",9),u["\u0275\u0275text"](13,"Title:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",10),u["\u0275\u0275elementStart"](15,"div",11),u["\u0275\u0275elementStart"](16,"span",12),u["\u0275\u0275text"](17,"T"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](18,"input",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",8),u["\u0275\u0275elementStart"](20,"label",9),u["\u0275\u0275text"](21,"Content:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](22,"editor",14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"div",4),u["\u0275\u0275elementStart"](24,"div",5),u["\u0275\u0275elementStart"](25,"strong"),u["\u0275\u0275element"](26,"i",15),u["\u0275\u0275text"](27," SEO"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"div",7),u["\u0275\u0275elementStart"](29,"div",2),u["\u0275\u0275elementStart"](30,"div",16),u["\u0275\u0275elementStart"](31,"div",8),u["\u0275\u0275elementStart"](32,"label",17),u["\u0275\u0275text"](33,"Meta Description:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"textarea",18),u["\u0275\u0275listener"]("ngModelChange",(function(){return t.contarCaracteresDescripcion()})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"p",19),u["\u0275\u0275elementStart"](36,"span",20),u["\u0275\u0275text"](37),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](38,"/160"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"div",16),u["\u0275\u0275elementStart"](40,"div",8),u["\u0275\u0275elementStart"](41,"label",21),u["\u0275\u0275text"](42,"Keywords:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](43,"textarea",22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](44,"div",23),u["\u0275\u0275elementStart"](45,"div",4),u["\u0275\u0275elementStart"](46,"div",5),u["\u0275\u0275elementStart"](47,"strong"),u["\u0275\u0275element"](48,"i",24),u["\u0275\u0275text"](49," Configuration"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](50,"div",7),u["\u0275\u0275elementStart"](51,"div",8),u["\u0275\u0275elementStart"](52,"label",9),u["\u0275\u0275text"](53,"Date:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](54,"div",10),u["\u0275\u0275elementStart"](55,"div",11),u["\u0275\u0275elementStart"](56,"span",12),u["\u0275\u0275element"](57,"i",25),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](58,"input",26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](59,"div",8),u["\u0275\u0275elementStart"](60,"label",9),u["\u0275\u0275text"](61,"Status:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](62,"div",10),u["\u0275\u0275elementStart"](63,"div",11),u["\u0275\u0275elementStart"](64,"span",12),u["\u0275\u0275element"](65,"i",27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](66,"select",28),u["\u0275\u0275elementStart"](67,"option",29),u["\u0275\u0275text"](68,"Select"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](69,F,2,2,"option",30),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](70,"div",8),u["\u0275\u0275elementStart"](71,"label",9),u["\u0275\u0275text"](72,"Category:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](73,"div",10),u["\u0275\u0275elementStart"](74,"div",11),u["\u0275\u0275elementStart"](75,"span",12),u["\u0275\u0275element"](76,"i",27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](77,"select",31),u["\u0275\u0275elementStart"](78,"option",29),u["\u0275\u0275text"](79,"Select"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](80,N,2,2,"option",30),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](81,"hr"),u["\u0275\u0275elementStart"](82,"button",32),u["\u0275\u0275element"](83,"i",33),u["\u0275\u0275text"](84," Edit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](85,"br"),u["\u0275\u0275elementStart"](86,"div",4),u["\u0275\u0275elementStart"](87,"div",5),u["\u0275\u0275elementStart"](88,"strong"),u["\u0275\u0275element"](89,"i",34),u["\u0275\u0275text"](90," Cover image"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](91,"div",7),u["\u0275\u0275elementStart"](92,"div",8),u["\u0275\u0275elementStart"](93,"div",35),u["\u0275\u0275elementStart"](94,"label",36),u["\u0275\u0275element"](95,"img",37),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](96,"input",38),u["\u0275\u0275listener"]("change",(function(e){return t.loadImage(e)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](97,"swal",39,40),u["\u0275\u0275listener"]("confirm",(function(){return t.cerrarVentana()})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](99,"swal",41,42),u["\u0275\u0275listener"]("confirm",(function(){return t.cerrarVentana()})),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275property"]("@routerTransition",void 0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("heading","Edit post")("icon","fa-pencil-square"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](20),u["\u0275\u0275property"]("formControlName","body")("init",t.getInitData()),u["\u0275\u0275advance"](15),u["\u0275\u0275textInterpolate"](t.contadorLetrasDescripcion),u["\u0275\u0275advance"](32),u["\u0275\u0275property"]("ngForOf",t.estados_publicacion),u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("ngForOf",t.categorias_publicacion),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",t.form.invalid),u["\u0275\u0275advance"](13),u["\u0275\u0275property"]("src",t.imgSrc,u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("showCancelButton",!1)("focusCancel",!0),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("showCancelButton",!1))},directives:[E.a,r.B,r.p,r.j,r.c,r.o,r.h,l.a,r.l,r.x,r.s,r.A,a.NgForOf,o.a],styles:[".image-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.image-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:rotate(3deg)}.image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.clsImagenDestacada[_ngcontent-%COMP%]{text-align:center}"],data:{animation:[Object(m.a)()]}}),e})()}];let q=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.h.forChild(j)],s.h]}),e})();var B=n("iLw0"),L=n("nrW+");n.d(t,"PublicacionesModule",(function(){return T}));let T=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[{provide:d.a,useClass:B.a,multi:!0}],imports:[[a.CommonModule,q,i.b,r.k,r.v,l.b,c.a,o.b.forRoot({buttonsStyling:!1,customClass:"modal-content",confirmButtonClass:"btn btn-primary",cancelButtonClass:"btn"}),L.a.forRoot()]]}),e})()}}]);