(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{uOo6:function(e,t,n){"use strict";n.r(t);var i=n("iInd"),r=n("ZZ88"),a=n("6gGH"),o=n("AytR"),s=n("SfIc"),c=n("G0yt"),l=n("8Y7J"),u=n("3zLz"),m=n("pK/H");const d=["successSwal"];let p=(()=>{class e{constructor(e,t,n,i){this.myServicio=e,this.ngZone=t,this.router=n,this.modalService=i,this.urlApi=o.a.apiUrl+"/user",this.nombresColumnas=["Avatar","Name","Email","Social","Active","Role"]}ngOnInit(){this.columnasData=this.myServicio.getColumnasTablaUsuarios()}getDismissReason(e){return e===c.a.ESC?"by pressing ESC":e===c.a.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}verDetallesUsuario(e){}editarUsuario(e){this.ngZone.run(()=>this.router.navigate(["/admin/usuarios/editar-usuario",e.id])).then()}eliminarUsuario(e){this.myServicio.deleteUsuario(e).subscribe(e=>{e&&this.successSwal.show()},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](l.NgZone),l["\u0275\u0275directiveInject"](i.e),l["\u0275\u0275directiveInject"](c.f))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-lista-usuarios"]],viewQuery:function(e,t){var n;1&e&&l["\u0275\u0275viewQuery"](d,!0),2&e&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.successSwal=n.first)},decls:9,vars:10,consts:[[1,"titlePage"],[3,"heading","icon"],[1,"row"],[1,"col-md-12"],[3,"nombresColumnas","urlApi","tituloReporte","puedeVerDetalles","columnasData","editarClick","eliminarClick"],["title","Information","text","User deleted","type","success",3,"showCancelButton","focusCancel"],["successSwal",""]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"div",0),l["\u0275\u0275element"](2,"app-page-header",1),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",2),l["\u0275\u0275elementStart"](4,"div",3),l["\u0275\u0275elementStart"](5,"dymtabla",4),l["\u0275\u0275listener"]("editarClick",(function(e){return t.editarUsuario(e)}))("eliminarClick",(function(e){return t.eliminarUsuario(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](6,"br"),l["\u0275\u0275element"](7,"swal",5,6),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("heading","User list")("icon","fa-pencil-square"),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("nombresColumnas",t.nombresColumnas)("urlApi",t.urlApi)("tituloReporte","User list")("puedeVerDetalles",!1)("columnasData",t.columnasData),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("showCancelButton",!1)("focusCancel",!0))},directives:[u.a,m.a,s.a],styles:[".titlePage[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;justify-content:space-between}.titlePage[_ngcontent-%COMP%]   .linkAdicionar[_ngcontent-%COMP%]{height:32px;width:150px}"],data:{animation:[Object(r.a)()]}}),e})(),f=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-adicionar-usuario"]],decls:2,vars:0,template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1," adicionar-usuario works!\n"),l["\u0275\u0275elementEnd"]())},styles:[""]}),e})();var g=n("s7LF"),h=n("0FS3"),v=n("SVse");const S=["confirmSwal"],y=["notFoundSwal"];function b(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"img",19),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"](),l["\u0275\u0275reference"](12).click()})),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("src",e.imgSrc,l["\u0275\u0275sanitizeUrl"])}}const w=[{path:"",component:p},{path:"adicionar-usuarios",component:f},{path:"editar-usuario/:id",component:(()=>{class e{constructor(e,t,n,i){this.formBuilder=e,this.usuarioService=t,this.route=n,this.router=i,this.urlUsuarios=o.a.apiMedias+"usuarios",this.imgSrc=null,this.form=new g.i({}),this.model={},this.fields=[],this.options={},this.idUsuario=Number.parseInt(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.usuarioService.showUsuario(this.idUsuario).subscribe(e=>{if(e){const{name:t,email:n,img:i,rolId:r,active:a,google:s,created_at:c}=e[0];this.model=Object.assign(Object.assign({},this.model),{name:t,email:n,img:i,rolId:r,active:a,google:s,created_at:c.slice(0,10)}),console.log(this.model),this.imgSrc=i.indexOf("https")>=0?i:"default.png"!==i?this.urlUsuarios+"/"+this.idUsuario+"/"+i:o.a.apiMedias+"/assets/user.png",this.fields=this.usuarioService.camposAdicionarUsuario(r,a)}else this.notFoundSwal.show()}),this.form=this.formBuilder.group({imagenUsuario:["",[]]})}loadImage(e){if(e.target.files&&e.target.files[0]){this.imagenUsuario=e.target.files[0];const t=new FileReader;t.onload=e=>{this.imgSrc=e.target.result.toString()},t.readAsDataURL(e.target.files[0])}}onSubmit(){const e=Object.assign(this.form.value),t=new FormData;t.append("datos",JSON.stringify(e)),this.imagenUsuario&&t.append("avatar",this.imagenUsuario,"avatar.png"),this.usuarioService.editUsuario(this.idUsuario,t).subscribe(e=>{e&&this.confirmSwal.show()},e=>{console.log(e)})}cerrarVentana(){this.options.resetModel(),this.form.reset(),this.router.navigate(["/admin/usuarios"])}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](g.e),l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](i.e))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-editar-usuario"]],viewQuery:function(e,t){var n;1&e&&(l["\u0275\u0275staticViewQuery"](S,!0),l["\u0275\u0275staticViewQuery"](y,!0)),2&e&&(l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.confirmSwal=n.first),l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.notFoundSwal=n.first))},decls:26,vars:13,consts:[[3,"heading","icon"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-8"],[3,"form","fields","options","model"],[1,"col-md-4","clsAvatar"],[1,"form-group"],[1,"image-upload"],["for","fileImagenDestacada"],["class","clsAvatar",3,"src","click",4,"ngIf"],["id","fileAvatar","formControlName","imagenUsuario","type","file","capture","camera","accept","image/*",3,"change"],["fileInput",""],[1,"col-md-12"],["type","submit",1,"btn","btn-primary","float-right",3,"disabled"],[1,"fa","fa-save"],["title","Information","text","The user has been edited","type","success",3,"showCancelButton","focusCancel","confirm"],["confirmSwal",""],["title","Information","text","Not found user with this id","type","error",3,"showCancelButton","confirm"],["notFoundSwal",""],[1,"clsAvatar",3,"src","click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275element"](1,"app-page-header",0),l["\u0275\u0275elementStart"](2,"form",1),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.onSubmit()})),l["\u0275\u0275elementStart"](3,"div",2),l["\u0275\u0275elementStart"](4,"div",3),l["\u0275\u0275element"](5,"formly-form",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",5),l["\u0275\u0275elementStart"](7,"div",6),l["\u0275\u0275elementStart"](8,"div",7),l["\u0275\u0275elementStart"](9,"label",8),l["\u0275\u0275template"](10,b,1,1,"img",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"input",10,11),l["\u0275\u0275listener"]("change",(function(e){return t.loadImage(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](13,"br"),l["\u0275\u0275element"](14,"hr"),l["\u0275\u0275elementStart"](15,"div",2),l["\u0275\u0275elementStart"](16,"div",12),l["\u0275\u0275elementStart"](17,"button",13),l["\u0275\u0275element"](18,"i",14),l["\u0275\u0275text"](19," Edit "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](20,"br"),l["\u0275\u0275element"](21,"br"),l["\u0275\u0275elementStart"](22,"swal",15,16),l["\u0275\u0275listener"]("confirm",(function(){return t.cerrarVentana()})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"swal",17,18),l["\u0275\u0275listener"]("confirm",(function(){return t.cerrarVentana()})),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("heading","Edit user")("icon","fa-pencil-square"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("formGroup",t.form),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("form",t.form)("fields",t.fields)("options",t.options)("model",t.model),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",t.imgSrc),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("disabled",t.form.invalid),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("showCancelButton",!1)("focusCancel",!0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("showCancelButton",!1))},directives:[u.a,g.B,g.p,g.j,h.d,v.NgIf,g.c,g.o,g.h,s.a],styles:['@font-face{font-family:"ATRotisSansSerif";src:url(atrss__0.3c05218de190ea51b268.TTF) format("truetype")}.image-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.clsAvatar[_ngcontent-%COMP%]{margin-top:12px;text-align:center;width:130px;border-radius:50px}.divEvento[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;padding-bottom:30px;border:1px solid #cfcfcf}.avatar[_ngcontent-%COMP%]{margin-top:15px;display:block;height:450px}.containerFotos[_ngcontent-%COMP%]{margin:40px}.precio[_ngcontent-%COMP%]{font-size:16px;margin-right:8px}#list-tab[_ngcontent-%COMP%]{font-family:"ATRotisSansSerif",Open Sans!important;font-size:18px}.acciones[_ngcontent-%COMP%]{margin-right:8px}.acciones[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:4px}.acciones[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;transform:rotate(-6deg)}.cabezal[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;justify-content:space-between}'],data:{animation:[Object(r.a)()]}}),e})()}];let C=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.h.forChild(w)],i.h]}),e})();var O=n("M0ag"),I=n("6yq/"),x=n("bquJ");n("nrW+"),n.d(t,"UsuariosModule",(function(){return M}));let M=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[v.CommonModule,C,O.b,I.a,s.b.forRoot({buttonsStyling:!1,customClass:"modal-content",confirmButtonClass:"btn btn-primary",cancelButtonClass:"btn"}),g.k,g.v,x.a,h.e.forRoot(),O.c.forRoot()]]}),e})()}}]);